<!DOCTYPE html>
<html>
<head>
    <title>My Simple GitHub Page</title>
</head>
<body>
    <h1>Hello World!</h1>
    <p>This is my first website hosted on GitHub Pages.</p>


	<p>Now we also have the agent....look at the nice button in lower right part of the page</p>
	

<script type='text/javascript'>
	function initEmbeddedMessaging() {
		try {
			embeddedservice_bootstrap.settings.language = 'en_US'; // For example, enter 'en' or 'en-US'

			window.addEventListener("onEmbeddedMessagingReady", () => {
			            embeddedservice_bootstrap.prechatAPI.setHiddenPrechatFields({
			            Country: 'Spain',
			            Language: 'es'
			          });
			        });
			
			embeddedservice_bootstrap.settings.shouldOpenLinksInSameTab = true;
			embeddedservice_bootstrap.settings.hideChatButtonOnLoad = true;
			
			embeddedservice_bootstrap.init(
				'00DMA000003XnGM',
				'Sov_Messaging_Channel',
				'https://leapmotor--dev01.sandbox.my.site.com/ESWSovMessagingChannel1764751682244',
				{
					scrt2URL: 'https://leapmotor--dev01.sandbox.my.salesforce-scrt.com'
				}
			);
		} catch (err) {
			console.error('Error loading Embedded Messaging: ', err);
		}
	};

	(function () {
  console.log("Test custom chat button");

  function hideStandardButton(es) {
    if (es && es.utilAPI && typeof es.utilAPI.hideChatButton === "function") {
      try {
        es.utilAPI.hideChatButton();
        console.log("hideChatButton() called");
      } catch (e) {
        console.warn("Error calling hideChatButton()", e);
      }
    }
  }

  function showCustomCTA(es) {
    if (!es || !es.utilAPI) {
      console.warn("utilAPI not available");
      return;
    }

    var existing = document.getElementById("leap-chat-cta");
    if (existing) {
      existing.style.display = "inline-flex";
      hideStandardButton(es);
      console.log("Custom CTA shown again");
      return;
    }

    var btn = document.createElement("button");
    btn.id = "leap-chat-cta";
    btn.textContent = "Chat with Leappy, your AI Assistant!";

    btn.style.position = "fixed";
    btn.style.right = "24px";
    btn.style.bottom = "24px";
    btn.style.zIndex = "99999";

    btn.style.backgroundImage = 'url("https://leapmotor--dev01.sandbox.my.site.com/ESWLPMLeapmotor1760706603231/sfsites/c/resource/1764059343000/LeapmotorChat")';
	btn.style.backgroundRepeat = 'no-repeat';
	btn.style.backgroundSize = 'contain';
	btn.style.backgroundPosition = '1px center';
	btn.style.paddingLeft = '40px';
	btn.style.height = "80px";
	btn.style.padding = "8px 15px";
    btn.style.fontSize = "18px";
    btn.style.fontWeight = "700";
    btn.style.borderRadius = "999px";
    btn.style.border = "none";
    btn.style.cursor = "pointer";
    btn.style.boxShadow = "0 4px 10px rgba(0,0,0,0.3)";
    btn.style.backgroundColor = "#4CAF50";
    btn.style.color = "#000000";
    btn.style.display = "inline-flex";
    btn.style.alignItems = "center";
    btn.style.justifyContent = "center";

    btn.addEventListener("mouseenter", function () {
      btn.style.transform = "scale(1.05)";
    });
    btn.addEventListener("mouseleave", function () {
      btn.style.transform = "scale(1)";
    });

    btn.addEventListener("click", function () {
      if (typeof es.utilAPI.launchChat === "function") {
        console.log("launchChat() from CTA");
        var r = es.utilAPI.launchChat();
        if (r && typeof r.then === "function") {
          r.then(function () {
            console.log("Chat launched (Promise resolved)");
          }).catch(function (err) {
            console.error("Error launching chat", err);
          });
        }
      } else {
        console.warn("launchChat() not available");
      }
    });

    document.body.appendChild(btn);
    hideStandardButton(es);
    console.log("Custom CTA created");
  }

  function hideCustomCTA() {
    var btn = document.getElementById("leap-chat-cta");
    if (btn) {
      btn.style.display = "none";
      console.log("Custom CTA hidden");
    }
  }

  window.addEventListener("onEmbeddedMessagingButtonCreated", function () {
    console.log("onEmbeddedMessagingButtonCreated fired");
    var es = window.embeddedservice_bootstrap;
    if (es) {
      showCustomCTA(es);
    }
  });

  window.addEventListener("onEmbeddedMessagingWindowMaximized", function () {
    console.log("onEmbeddedMessagingWindowMaximized fired");
    hideCustomCTA();
  });

  window.addEventListener("onEmbeddedMessagingWindowMinimized", function () {
    console.log("onEmbeddedMessagingWindowMinimized fired");
    var es = window.embeddedservice_bootstrap;
    if (es) {
      hideStandardButton(es);
      showCustomCTA(es);
    }
  });

  function waitForES(maxAttempts, intervalMs) {
    var attempts = 0;
    (function check() {
      attempts++;
      var es = window.embeddedservice_bootstrap;
      if (es && es.utilAPI) {
        console.log("utilAPI ready (initial)");
        showCustomCTA(es);
        return;
      }
      if (attempts >= maxAttempts) {
        console.warn("utilAPI not found after", attempts, "attempts");
        return;
      }
      setTimeout(check, intervalMs);
    })();
  }

  if (document.readyState === "complete" || document.readyState === "interactive") {
    waitForES(50, 200);
  } else {
    window.addEventListener("DOMContentLoaded", function () {
      waitForES(50, 200);
    });
  }
})();
</script>
<script type='text/javascript' src='https://leapmotor--dev01.sandbox.my.site.com/ESWSovMessagingChannel1764751682244/assets/js/bootstrap.min.js' onload='initEmbeddedMessaging()'></script>

</body>
</html>
